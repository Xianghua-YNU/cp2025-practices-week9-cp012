# 迭代函数系统(IFS)分形实验报告

## 实验目的

1. 理解迭代函数系统(IFS)的基本原理和算法
2. 掌握"混沌游戏"随机迭代方法
3. 实现巴恩斯利蕨和概率树的生成
4. 分析不同参数对分形图形的影响

## 实验过程

### 1. 核心算法实现

**IFS参数定义**:
- 巴恩斯利蕨: 4个仿射变换(茎干、小叶片、左右大叶片)
- 概率树: 3个仿射变换(树干、左右分支)

**混沌游戏算法**:
1. 初始化起始点
2. 随机选择变换(按概率)
3. 应用仿射变换生成新点
4. 重复迭代生成点集

### 2. 分形实现

**巴恩斯利蕨参数**:
- 茎干变换: 概率0.01
- 小叶片变换: 概率0.85
- 左右大叶片变换: 各概率0.07

**概率树参数**:
- 树干变换: 概率0.10
- 左右分支变换: 各概率0.45

### 3. 遇到的问题与解决

(请在此描述实现过程中遇到的问题及解决方法)

## 结果展示

### 1. 巴恩斯利蕨
[插入生成的巴恩斯利蕨分形图]![Figure_1](https://github.com/user-attachments/assets/7d1b6cf0-e45b-4852-8a12-3fa4421f13fd)

- 展示不同变换对应的叶片部分
- ![Figure_4](https://github.com/user-attachments/assets/442bdcdf-311e-49ba-a155-0dcbc6934388)

- 分析概率参数对叶片密度的影响
- 高频率区域点密集，如0.85为主叶片部分，低频率区域点稀疏，如0.01为茎部顶端

### 2. 概率树 
[插入生成的概率树分形图]![Figure_2](https://github.com/user-attachments/assets/8f2ee496-399f-49ee-9ad6-f1906ffa8feb)

- 展示分支结构
- 分析变换参数对树形的影响
1. 旋转参数：`b/c` 绝对值增大 → 螺旋分支
2. 不对称缩放：左右分支参数不同 → 扭曲生长
3. 概率失衡：可能导致一侧分支消失
## 分析与思考

1. **IFS特性分析**
   - 仿射变换参数对图形各部分的影响
   - a/d：控制缩放比例（如蕨类中 `0.16` 使茎部细长）b/c：控制旋转和剪切（如 `0.04/-0.04` 产生蕨叶的倾斜）e/f：控制平移（如 `1.6` 将叶片向上移动）
   - 概率参数与图形密度的关系
   - 概率p决定采样频率，高频率区域点密集，低频率区域点稀疏

2. **参数实验**
   - 修改概率参数的效果
   - 若把茎部概率0.01调高至0.05，则茎部更粗状，叶片变浅![Figure_3](https://github.com/user-attachments/assets/7891a3fb-bbac-4fcb-8f56-70ee25d0d150)

   - 调整变换参数的效果
   - 缩放参数**：`a/d > 1` 会导致发散
剪切参数：`b/c` 绝对值增大产生螺旋效果
平移参数：`f` 值过大可能导致图形分裂
      
3. **扩展思考**
   - 如何设计新的IFS规则生成其他分形：确定关键部件，再进行分解变换
   - 添加颜色渐变效果的方法：方法1：根据迭代深度着色
colors = np.arange(len(points))
plt.scatter(..., c=colors, cmap='viridis')
方法2：按变换类型着色
color_map = [np.random.rand(3,) for _ in ifs_params]
colors = [color_map[j] for j in chosen_transforms]
   - 性能优化方案(减少点数同时保持视觉效果)：1.分层渲染；2.使用动态密度；3.加速硬件

4. **算法比较**
   - IFS与其他分形生成方法的对比：1.L系统，IFS更适合植物生长模拟，但比L系统复杂；2.逃逸时间法，IFS细节更丰富，但计算量大
   - 随机迭代与确定性迭代的差异：1.随机迭代用概率选择变换，确定性迭代则固定顺序应用所有变换；2.速度随机迭代更快；3.效果上，随机迭代更符合自然密度分布，确定性虽精确但需要后期处理；4.随机迭代适合大型分形，确定性适合精确结构分析

**注：请在每一部分补充你自己的实验内容、图像、分析和关键代码。**
